# AI学習による向社会性変化の実証研究

oTreeを用いた行動経済学実験システム

## 概要

このリポジトリは、日本人工知能学会第39回全国大会（JSAI2025）で発表した論文「行動がAIに学習されると知ったとき，人はどう変わるのか―向社会性の変化に関する実証研究―」の実験システムです。

### 研究背景
AI技術の進歩により、人間の行動データが機械学習のために収集・分析される機会が増加しています。本研究では、自分の行動がAIに学習されることを知った参加者の社会的選好（向社会性）がどのように変化するかを、独裁者ゲーム実験を通じて実証的に検証しました。

### 研究手法
本研究は Klockmann et al. (2022) の先駆的研究を基礎とし、実験参加者が15回の独裁者ゲームを通じて配分決定を行い、AI学習条件では、その選択データを用いてランダムフォレストモデルが16回目の配分を予測・実行します。

## 実験設計

### 実験条件
- **実験名称**: 「AI学習によるディクテーターゲーム実験」
- **設計**: Klockmann et al. (2022) の実験デザインを参考に、AI条件と基本条件を設定
- **参加者**: すべての参加者がA役（独裁者）として実験に参加

**条件1：AI学習条件**
- 15回の通常ラウンドでの選択データをAIが学習
- 16回目のラウンドはAIが予測・決定
- AIによる予測結果が実際の報酬に反映

**条件2：基本条件（コントロール）**
- 16回すべてのラウンドを参加者が決定
- AI学習に関する説明なし

### 実験フロー
1. **Part 1 - 実労働タスク（real_effort_app）**
   - バイナリパターン認識タスク4問
   - 全員1200ポイント獲得（各タスク300ポイント）

2. **Part 2 - 独裁者ゲーム**
   - **AI学習条件**: dictator_app → ml_app
   - **基本条件**: Base_dictator_app
   - 15回の通常ラウンド + 1回の追加ラウンド
   - 取得データ: 選択結果（X/Y）、配分額、意思決定時間

3. **Part 3 - 事後アンケート（questionnaire_app）**
   - デモグラフィック情報、AI評価、選好評価
   - 最終報酬の表示（実労働 + ランダム2回分）

## プロジェクト構造

```
jsai2025_oTree/
├── README.md                          # プロジェクト概要
├── requirements.txt                   # Python依存関係
├── runtime.txt                        # Python バージョン指定
├── Procfile                          # Herokuデプロイ設定
├── __init__.py                       # oTreeプロジェクト設定
├── MyPage.html                       # カスタムページテンプレート
├── Results.html                      # 結果表示テンプレート
│
├── _static/                          # 静的ファイル
├── _rooms/                           # 実験ルーム設定
│
├── welcome_app/                      # 共通：実験の説明・同意
├── real_effort_app/                  # 共通：実労働タスク（1200ポイント獲得）
│   └── templates/
│       └── real_effort_app/
│
├── [条件1] AI学習条件
│   ├── dictator_app/                 # 独裁者ゲーム（AI学習条件）
│   │   ├── models.py                 # ゲームのロジック
│   │   ├── pages.py                  # ページの表示・遷移
│   │   ├── payoff_scenarios.csv      # 配分シナリオ
│   │   └── templates/
│   │       └── dictator_app/
│   └── ml_app/                       # AI学習・予測モジュール
│       ├── models.py                 # AI学習・予測のロジック
│       └── pages.py                  # 予測結果の表示
│
├── [条件2] 基本条件
│   └── Base_dictator_app/            # 独裁者ゲーム（基本条件）
│       ├── models.py                 # ゲームのロジック
│       ├── pages.py                  # ページの表示・遷移
│       ├── payoff_scenarios.csv      # 配分シナリオ
│       └── templates/
│           └── Base_dictator_app/
│
└── questionnaire_app/                # 共通：最終アンケート
    └── templates/
        └── questionnaire_app/
```

## 技術仕様

### システム構成
- **言語**: Python (>= 3.8)
- **実験フレームワーク**: oTree (>= 5.0)
- **機械学習**: scikit-learn (RandomForestClassifier)
- **デプロイメント**: Heroku対応

### AIモデル詳細
- **アルゴリズム**: ランダムフォレスト（n_estimators=10, bootstrap=True, random_state固定）
- **学習データ**: 15回の選択データ（PayoffX_A, PayoffX_B, PayoffY_A, PayoffY_B, choice）
- **特徴量**（全8項目）:
  1. A_x, B_x（X選択時の配分）
  2. A_y, B_y（Y選択時の配分）
  3. A_x + B_x, A_y + B_y（効率性指標）
  4. A_x - A_y, B_x - B_y（不平等度指標）
- **予測対象**: 16回目ラウンドでの選択（X=1, Y=0）
- **予測実装**: 予測用6問からランダムに1問を選択、多数決で最終予測

### ペイオフ設計
実験では以下の要素を組み合わせた配分設定を使用：
- **Category_Slope**: Selfish, Receiver indiff., Dictator indiff., X Pareto
- **Category_Position**: Advantageous, Disadvantageous, Mixed
- **効率性・平等性**: 各選択肢の社会的望ましさを多角的に評価
- **学習・予測用**: Is_Training='True'（15問）/ 'False'（6問）で分類

## 収集データ

### 実験データ
- **選択データ**: 各ラウンドでの配分選択（X/Y）
- **配分データ**: 実際の報酬配分額（独裁者・受け手）
- **時間データ**: 意思決定所要時間（PageTimesデータ）
- **AI予測データ**: 機械学習による予測結果（ml_app_Playerに格納）

### アンケートデータ
**基本情報**
- 性別、年齢（18-100歳）、学部（19選択肢）、学年（7段階）

**AI評価項目（各7段階評価）**
- AI満足度：予測の正確さ、タイミング、方法などの総合的満足度
- AI理解度：AIによる意思決定の仕組みの理解度
- 予測精度：AI予測と実際の意図した配分の一致度
- ランダムフォレスト理解：使用したアルゴリズムの基本的な仕組みの理解度
- テクノロジー信頼度：AIなどのテクノロジーへの一般的信頼度

**選好評価項目（各7段階評価）**
- 利己的選好：独裁者の報酬最大化の重視度
- 平等選好：不平等の最小化の重視度
- 効率性選好：合計報酬の最大化の重視度
- 競争的選好：独裁者が受け手より高い報酬を得ることの重視度

### 報酬設計
- 実労働タスク報酬（1200ポイント）
- 全16ラウンドから選ばれた2回分の報酬
- AI学習条件：15回分からランダム1回 + AIが予測した16回目
- 基本条件：16回分からランダム2回

## 参考文献

**本研究の基礎となった研究:**
- Klockmann, V., Schenk-Hoppe, K. R., & Villeval, M. C. (2022). Artificial intelligence, ethics, and intergenerational responsibility. *Journal of Economic Behavior & Organization*, 203, 284-317.

## 注意事項
- これは個人的な研究記録として作成したものです
- 厳密な学術プロジェクトではなく、質問・引用等への対応はできかねます